<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç»™å®å®çš„ä¸“å±è‡´æ­‰ & 1000ä»½å¿ƒåŠ¨</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background: linear-gradient(135deg, #fad0c4 0%, #ff9a9e 100%);
            background-attachment: fixed;
            font-family: 'Helvetica Neue', Arial, 'PingFang SC', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
            padding: 15px;
            overscroll-behavior-y: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* ================= 1. åŠ¨æ€ä¿¡å°å¼€åœºç‰¹æ•ˆ ================= */
        #envelope-wrapper {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            background: linear-gradient(135deg, #fad0c4 0%, #ff9a9e 100%);
            z-index: 99999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.8s ease, transform 0.8s ease;
        }

        .envelope {
            position: relative;
            width: 280px;
            height: 180px;
            background: #d65a71; /* ä¿¡å°å†…è¡¬é¢œè‰²(è¾ƒæ·±) */
            box-shadow: 0 20px 50px rgba(216, 27, 96, 0.5);
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .envelope:hover { transform: translateY(-5px); }

        /* ä¿¡çº¸ */
        .env-paper {
            position: absolute;
            top: 10px; left: 10px; right: 10px; bottom: 10px;
            background: #fff;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #d81b60;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 1;
        }

        .env-paper h2 { font-size: 18px; margin-bottom: 5px; letter-spacing: 1px; }
        .env-paper p { font-size: 12px; color: #ff758c; }

        /* ä¿¡å°ä¸‹åŠéƒ¨åˆ† */
        .env-front {
            position: absolute;
            bottom: 0; left: 0;
            border-left: 140px solid transparent;
            border-right: 140px solid transparent;
            border-bottom: 110px solid #ff9fb0; /* æ­£é¢æœ€å¤–å±‚ */
            z-index: 3;
        }

        /* ä¿¡å°å·¦å³æŠ˜å ç¿¼ */
        .env-left-right {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 2;
        }
        .env-left-right::before {
            content: ''; position: absolute; top: 0; left: 0;
            border-top: 90px solid transparent; border-bottom: 90px solid transparent; border-left: 140px solid #ff8a9d;
        }
        .env-left-right::after {
            content: ''; position: absolute; top: 0; right: 0;
            border-top: 90px solid transparent; border-bottom: 90px solid transparent; border-right: 140px solid #ff8a9d;
        }

        /* ä¿¡å°ç¿»ç›– */
        .env-flap {
            position: absolute;
            top: 0; left: 0;
            border-left: 140px solid transparent;
            border-right: 140px solid transparent;
            border-top: 105px solid #ff758c;
            transform-origin: top;
            transition: transform 0.6s ease, z-index 0.2s;
            z-index: 4;
        }

        /* çˆ±å¿ƒç«æ¼†å°ç«  */
        .env-seal {
            position: absolute;
            top: 105px; left: 50%;
            transform: translate(-50%, -50%);
            width: 45px; height: 45px;
            background: #d81b60;
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            color: white; font-size: 22px;
            z-index: 5;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        /* ç‚¹å‡»æç¤ºæ–‡å­— */
        .env-hint {
            margin-top: 40px;
            color: white;
            font-size: 15px;
            letter-spacing: 2px;
            animation: pulse 1.5s infinite;
            text-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        /* --- å¼€å¯åŠ¨ç”»çŠ¶æ€ --- */
        .envelope.open .env-flap { transform: rotateX(180deg); z-index: 0; }
        .envelope.open .env-seal { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
        .envelope.open .env-paper { transform: translateY(-70px); z-index: 3; }

        /* ================= 2. ä¸»é¡µé¢å†…å®¹ (åˆå§‹éšè—) ================= */
        #main-content {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            opacity: 0; /* åˆå§‹é€æ˜ */
            transition: opacity 1.2s ease;
        }

        .header { text-align: center; margin: 40px 0 20px 0; color: #fff; text-shadow: 0 2px 10px rgba(0,0,0,0.2); z-index: 10; }
        .header h1 { font-size: 26px; font-weight: bold; margin-bottom: 10px; letter-spacing: 2px; }
        .header p { font-size: 14px; opacity: 0.95; line-height: 1.6; }

        .stats {
            background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            padding: 8px 24px; border-radius: 30px;
            color: #fff; font-size: 14px; font-weight: bold;
            margin-bottom: 25px; box-shadow: 0 4px 15px rgba(255, 107, 129, 0.2);
            position: sticky; top: 15px; z-index: 100;
        }

        .message-container {
            display: flex; flex-wrap: wrap; justify-content: center; gap: 15px;
            width: 100%; max-width: 600px; padding-bottom: 40px; z-index: 10;
        }

        .msg-card {
            background: rgba(255, 255, 255, 0.65);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.9);
            padding: 18px; border-radius: 22px;
            color: #5a3a4a; font-size: 15px; line-height: 1.6;
            box-shadow: 0 8px 32px 0 rgba(255, 154, 158, 0.15);
            transform: translateY(30px) scale(0.95); opacity: 0;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            width: 100%; word-wrap: break-word; position: relative; overflow: hidden;
        }

        .msg-card img { max-width: 100%; height: auto; display: block; margin: 10px auto 0; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .msg-card.img-mode { text-align: center; background: rgba(255, 255, 255, 0.75); }
        .img-caption { font-weight: bold; color: #d81b60; margin-bottom: 8px; display: block; }

        .msg-card.style-emoji { font-size: 28px; text-align: center; background: rgba(255,255,255,0.5); }
        .msg-card.style-sweet { color: #d81b60; font-weight: bold; }
        .msg-card.style-sorry { border-left: 5px solid #ff758c; background: rgba(255, 240, 245, 0.7); }
        .msg-card.show { transform: translateY(0) scale(1); opacity: 1; }

        .msg-card.finale {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); color: #d81b60;
            font-size: 18px; font-weight: bold; text-align: center; padding: 40px 20px;
            border-radius: 24px; box-shadow: 0 15px 40px rgba(255, 117, 140, 0.4);
            margin-top: 30px; border: 3px solid #fff; animation: pulse 2s infinite;
        }

        .msg-num { opacity: 0.6; font-size: 12px; display: block; margin-bottom: 6px; font-family: monospace; color: #ff758c; }
        .finale .msg-num { color: rgba(216, 27, 96, 0.6); }

        .loading-trigger { height: 60px; width: 100%; display: flex; justify-content: center; align-items: center; color: #fff; font-size: 14px; opacity: 0.9; padding-bottom: 20px; }

        /* æ¼‚æµ®ç²’å­ */
        .particle {
            position: fixed; pointer-events: none; z-index: 9999;
            animation: floatUp ease-out forwards; filter: drop-shadow(0 2px 4px rgba(255, 105, 180, 0.3));
        }

        @keyframes floatUp { 0% { transform: translateY(0) scale(0.5) rotate(0deg); opacity: 1; } 100% { transform: translateY(-150px) scale(1.5) rotate(360deg); opacity: 0; } }
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
    </style>
</head>
<body>

    <div id="envelope-wrapper">
        <div class="envelope" id="envelope">
            <div class="env-paper">
                <h2>è‡´æˆ‘æœ€çˆ±çš„å®å®</h2>
                <p>å†…å« 1000 ä»½æ­‰æ„ä¸å¿ƒåŠ¨</p>
            </div>
            <div class="env-left-right"></div>
            <div class="env-front"></div>
            <div class="env-flap"></div>
            <div class="env-seal">â¤</div>
        </div>
        <div class="env-hint">ç‚¹å‡»æ‹†å¼€ä¿¡å°</div>
    </div>

    <div id="main-content" style="display: none;">
        <div class="header">
            <h1>è‡´æˆ‘æœ€çˆ±çš„å®å®</h1>
            <p>æ—…è¡Œçš„é—æ†¾éƒ½å˜æˆç²‰è‰²çš„æ°”æ³¡è¡¥å¿ä½ <br>è¿™æ˜¯å±äºä½ çš„ 1000 ä»½åçˆ±</p>
        </div>

        <div class="stats" id="counter">ğŸ’— å‘ä¸Šæ»‘åŠ¨ï¼ŒæŸ¥æ”¶å¿ƒæ„... 0/1000</div>

        <div class="message-container" id="container">
            </div>

        <div class="loading-trigger" id="loading">ğŸŒ¸ ç»§ç»­ä¸Šæ»‘ï¼Œè¿˜æœ‰å¥½å¤šè¯æƒ³å¯¹ä½ è¯´...</div>
    </div>

    <script>
        // ================= ä¿¡å°å¼€åœºé€»è¾‘ =================
        const envelopeWrapper = document.getElementById('envelope-wrapper');
        const envelope = document.getElementById('envelope');
        const mainContent = document.getElementById('main-content');
        
        let isOpened = false;

        envelope.addEventListener('click', () => {
            if (isOpened) return;
            isOpened = true;

            // 1. ä¿¡å°ç¿»ç›–æ‰“å¼€ï¼Œä¿¡çº¸å‡èµ·
            envelope.classList.add('open');
            
            // 2. ç­‰å¾…å¥¹çœ‹æ¸…ä¿¡çº¸ä¸Šçš„å­— (1.5ç§’)ï¼Œç„¶åä¿¡å°æ•´ä½“æ·¡å‡º
            setTimeout(() => {
                envelopeWrapper.style.opacity = '0';
                envelopeWrapper.style.transform = 'scale(1.1)'; // å¾®å¾®æ”¾å¤§æ·¡å‡º
                
                // 3. ä¿¡å°å®Œå…¨æ¶ˆå¤±åï¼Œæ˜¾ç¤ºä¸»ç•Œé¢å¹¶è§¦å‘ç€‘å¸ƒæµå’Œç²’å­ç‰¹æ•ˆ
                setTimeout(() => {
                    envelopeWrapper.style.display = 'none';
                    mainContent.style.display = 'flex';
                    
                    // å¼ºåˆ¶é‡ç»˜ï¼Œè§¦å‘æ·¡å…¥
                    mainContent.offsetHeight; 
                    mainContent.style.opacity = '1';
                    
                    // å¼€å¯æµªæ¼«ä¹‹æ—…ï¼
                    setTimeout(() => {
                        renderBatch();
                        setTimeout(renderBatch, 800);
                        startParticles(); // å¯åŠ¨çˆ±å¿ƒç‰¹æ•ˆ
                    }, 300);

                }, 800); // å¯¹åº” CSS ä¸­ transition çš„ 0.8s
            }, 1500);
        });


        // ================= æ¶ˆæ¯è¯­æ–™ä¸æ¸²æŸ“é€»è¾‘ =================
        const corpus = [
            { text: "å®å®å¯¹ä¸èµ·ï¼Œé‚£å¤©è·¯ä¸Šæˆ‘å¤ªç¬¨äº†ğŸ˜”", type: "style-sorry" },
            { text: "æˆ‘ä¸è¯¥è®©ä½ ä¸€ä¸ªäººæ¶ˆåŒ–é‚£äº›çƒ¦å¿ƒäº‹çš„ï¼Œä»¥åç»å¯¹ä¸ä¼šäº†ï¼", type: "style-sorry" },
            { text: "ç»™ä½ å˜ä¸ªé­”æœ¯ï¼Œå‘¼â€”â€”åå¿ƒæƒ…å…¨éƒ¨é£èµ°å•¦ï¼âœ¨", type: "style-sweet" },
            { text: "ğŸ¥ºğŸ¥ºğŸ¥º (çœ¼å·´å·´çœ‹ç€ä½ æ±‚åŸè°…)", type: "style-emoji" },
            { text: "è¿™å‡ å¤©æ»¡è„‘å­éƒ½æ˜¯æ€ä¹ˆæŠŠä½ å“„å›æ¥ï¼Œè¿æ•²ä»£ç éƒ½åœ¨æŠ¥é”™æç¤ºæƒ³ä½ ã€‚", type: "" },
            { text: "å°±ç®—ä½ ç”Ÿæ°”å˜Ÿå˜´çš„æ—¶å€™ï¼Œæˆ‘ä¹Ÿè§‰å¾—ä½ å…¨å®‡å®™æœ€å¯çˆ±ï¼ˆå°å£°è¯´ï¼‰ã€‚", type: "style-sweet" },
            { text: "ä»¥åæˆ‘ä¸åšé—·è‘«èŠ¦äº†ï¼Œåšä½ çš„ä¸“å±æ²™è¢‹ï¼Œéšä¾¿æéšä¾¿é”¤ï¼", type: "" },
            { text: "ç­‰ä¸‹ä¸ªå‘¨æœ«ï¼Œæƒ³å¸¦ä½ å»åƒé¡¿è¶…æ£’çš„å¤§é¤è¡¥å¿ä½ ï¼", type: "" },
            { text: "ğŸ§‹ğŸ°ğŸ© æŠ•å–‚æˆ‘çš„å°çŒªçŒªï¼", type: "style-emoji" },
            { text: "æˆ‘çš„å…¨ä¸–ç•Œæœ€æœ€æœ€æ¼‚äº®çš„å¥³æœ‹å‹å¤§äºº~", type: "style-sweet" },
            { text: "æˆ‘é”™äº†æˆ‘é”™äº†æˆ‘é”™äº† (æ­£åœ¨ç–¯ç‹‚è·ªé”®ç›˜ä¸­...)", type: "style-sorry" },
            { text: "ğŸ¶ æ±ªæ±ªæ±ªï¼Œåˆ«ç”Ÿå°ç‹—çš„æ°”äº†å¥½ä¸å¥½å˜›", type: "" },
            { text: "æƒ³ä½ å•¦ï¼Œæƒ³è§ä½ ï¼Œæƒ³ç´§ç´§æŠ±ä½ä½ ï¼Œä¸æ’’æ‰‹çš„é‚£ç§ã€‚", type: "style-sweet" },
            
            // å›¾ç‰‡æ¶ˆæ¯
            { text: "åˆ«ç”Ÿæ°”å•¦ï¼Œå‡‘è¿‘ç‚¹ç»™ä½ çœ‹ä¸ªå®è´~", image: "image_1.png" },
            { text: "å§”å±ˆå·´å·´ï¼ŒçŸ¥é“é”™å•¦...", image: "image_2.png", type: "style-sorry" },
            { text: "æˆ‘æ­£åœ¨é¢å£æ€è¿‡ä¸­ï¼Œå‹¿æ‰° (é™¤éæ˜¯ä½ æ‰¾æˆ‘)", image: "image_3.png" },
            { text: "å¿«æ¥æŠ±æŠ±ï¼å†²é¸­ï¼æ»¡å±çˆ±å¿ƒå‘å°„ï¼", image: "image_4.png", type: "style-sweet" },
            { text: "æ»¡è„‘å­éƒ½æ˜¯ä½ ï¼Œç»™ä½ æˆ‘çš„å°å¿ƒå¿ƒ", image: "image_5.png" },
            { text: "è¿™æ˜¯ä¸€å¼ æœ‰å£°éŸ³çš„å›¾ç‰‡ï¼šæˆ‘çˆ±ä½ ï¼", image: "image_6.png", type: "style-sweet" },
            
            { text: "é‚£å¤©è¡Œæå¤ªé‡ï¼Œæˆ‘åº”è¯¥ç¬¬ä¸€æ—¶é—´æŠ¢è¿‡æ¥å¸®ä½ æçš„ï¼Œæ€ªæˆ‘ååº”æ…¢ï¼", type: "style-sorry" },
            { text: "æ‰¾é”™è·¯çš„æ—¶å€™æˆ‘ä¸è¯¥ä¸è¯´è¯çš„ï¼Œåº”è¯¥é©¬ä¸Šç‰µèµ·ä½ çš„æ‰‹å¸¦ä½ èµ°ã€‚", type: "style-sorry" },
            { text: "ä¿è¯ä»¥åå‡ºå»ç©ï¼Œæˆ‘ä¸€å®šæŠŠæ”»ç•¥åšåˆ°å®Œç¾ï¼Œåšä½ çš„VIPä¸“å±é‡‘ç‰Œå¯¼æ¸¸ï¼", type: "style-sweet" },
            { text: "â¤ï¸ğŸ§¡ğŸ’›ğŸ’šğŸ’™ğŸ’œ", type: "style-emoji" },
            { text: "ä¸ç®¡å‘ç”Ÿä»€ä¹ˆï¼Œä½ åœ¨æˆ‘å¿ƒé‡Œæ°¸è¿œæ˜¯ç¬¬ä¸€é¡ºä½ã€‚", type: "style-sweet" }
        ];

        const container = document.getElementById('container');
        const counter = document.getElementById('counter');
        const loading = document.getElementById('loading');
        
        let currentCount = 0;
        const totalMessages = 1000;
        const batchSize = 15; 
        let isGenerating = false; 

        function getRandomMsg() { return corpus[Math.floor(Math.random() * corpus.length)]; }

        function renderBatch() {
            if (isGenerating || currentCount >= totalMessages) return;
            isGenerating = true;

            let end = Math.min(currentCount + batchSize, totalMessages);
            let fragment = document.createDocumentFragment();
            let newCards = [];
            
            for (let i = currentCount; i < end; i++) {
                const card = document.createElement('div');
                card.className = 'msg-card';
                
                if (i === totalMessages - 1) {
                    card.classList.add('finale');
                    card.innerHTML = `<span class="msg-num">Message No.1000</span>
                        ğŸ’Œ ç»ˆäºæ¥åˆ°ç¬¬ 1000 æ¡ ğŸ’Œ<br><br>
                        æ„Ÿè°¢ä½ è€å¿ƒåœ°æ»‘åˆ°äº†è¿™é‡Œã€‚<br>
                        å‰é¢æœ‰é‡å¤çš„ç¢ç¢å¿µï¼Œ<br>æœ‰æ’’å¨‡å–èŒçš„è¡¨æƒ…åŒ…ï¼Œ<br>ä½†è¿™ä¸€å¥ç»å¯¹å”¯ä¸€ï¼š<br><br>
                        <span style="font-size: 24px; color: #d81b60;">å¯¹ä¸èµ·ï¼Œæˆ‘çˆ±ä½ ã€‚</span><br><br>
                        æœªæ¥çš„è·¯ï¼Œè¯·å…è®¸æˆ‘ç»§ç»­ç‰µç€ä½ èµ°ã€‚â¤ï¸`;
                } else {
                    const msgObj = getRandomMsg();
                    let contentHtml = `<span class="msg-num">No.${i + 1}</span>`;

                    if (msgObj.image) {
                        card.classList.add('img-mode');
                        if (msgObj.type) card.classList.add(msgObj.type);
                        if(msgObj.text) contentHtml += `<span class="img-caption">${msgObj.text}</span>`;
                        contentHtml += `<img src="${msgObj.image}" alt="è¡¨æƒ…åŒ…">`;
                    } else {
                        if(msgObj.type) card.classList.add(msgObj.type);
                        contentHtml += msgObj.text;
                    }
                    card.innerHTML = contentHtml;
                }
                fragment.appendChild(card);
                newCards.push(card);
            }

            container.appendChild(fragment);
            currentCount = end;

            newCards.forEach((card, index) => {
                setTimeout(() => {
                    card.classList.add('show');
                    counter.innerText = `ğŸ’— å·²é€è¾¾: ${currentCount} / 1000`;
                }, index * 100); 
            });

            setTimeout(() => {
                isGenerating = false;
                if (currentCount >= totalMessages) {
                    loading.innerHTML = "âœ¨ 1000ä»½å¿ƒæ„å·²å…¨éƒ¨é€è¾¾ï¼Œå¿«å»æŠ±æŠ±ä»–å§ï¼âœ¨";
                }
            }, newCards.length * 100 + 200);
        }

        window.addEventListener('scroll', () => {
            const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight;
            const clientHeight = document.documentElement.clientHeight || window.innerHeight;

            if (scrollTop + clientHeight >= scrollHeight - 250) {
                renderBatch();
            }
        });

        // ================= ç²’å­ç‰¹æ•ˆé€»è¾‘ =================
        const emojis = ['â¤ï¸', 'ğŸ’–', 'ğŸŒ¸', 'ğŸ€', 'ğŸ’•', 'âœ¨'];
        function createParticle(x, y) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.innerText = emojis[Math.floor(Math.random() * emojis.length)];
            const size = Math.random() * 18 + 12; 
            const duration = Math.random() * 2 + 1.5; 
            particle.style.left = `${x}px`;
            particle.style.top = `${y}px`;
            particle.style.fontSize = `${size}px`;
            particle.style.animationDuration = `${duration}s`;
            document.body.appendChild(particle);
            setTimeout(() => particle.remove(), duration * 1000);
        }

        // æŠŠç²’å­ç‰¹æ•ˆå°è£…èµ·æ¥ï¼Œç­‰ä¿¡å°æ‰“å¼€åå†æ‰§è¡Œ
        function startParticles() {
            // èƒŒæ™¯éšæœºé£˜è½
            setInterval(() => {
                createParticle(Math.random() * window.innerWidth, window.innerHeight);
            }, 800);

            // ç‚¹å‡»å±å¹•ç‚¸å‡ºçˆ±å¿ƒ
            window.addEventListener('pointerdown', (e) => {
                // å¦‚æœç‚¹çš„æ˜¯ä¿¡å°ç›¸å…³å…ƒç´ ï¼Œä¸è§¦å‘çˆ±å¿ƒï¼ˆé˜²æ­¢å¼€åœºåŠ¨ç”»æ—¶ä¹±å‡ºå¿ƒï¼‰
                if (e.target.closest('#envelope-wrapper')) return;
                
                for(let i=0; i<4; i++) {
                    setTimeout(() => {
                        const offsetX = (Math.random() - 0.5) * 50;
                        const offsetY = (Math.random() - 0.5) * 50;
                        createParticle(e.clientX + offsetX, e.clientY + offsetY);
                    }, i * 80);
                }
            });
        }
    </script>
</body>
</html>
